From 0a3bd1f685b40eca399a998f2540158aee2a053f Mon Sep 17 00:00:00 2001
From: Arnaud Gueras <arnaudgs@gmail.com>
Date: Mon, 27 Feb 2023 07:59:19 +0100
Subject: [PATCH 2/4] www: prettify XCP-ng-index.html deploy.js

Signed-off-by: Arnaud Gueras <arnaudgs@gmail.com>
---
 .../opt/xensource/www/XCP-ng-index.html       | 1121 ++++++++---------
 .../opt/xensource/www/asset/deploy.js         |  368 +++---
 2 files changed, 683 insertions(+), 806 deletions(-)

diff --git a/src/xenserver/opt/xensource/www/XCP-ng-index.html b/src/xenserver/opt/xensource/www/XCP-ng-index.html
index c710946..7d3ef32 100644
--- a/src/xenserver/opt/xensource/www/XCP-ng-index.html
+++ b/src/xenserver/opt/xensource/www/XCP-ng-index.html
@@ -1,604 +1,555 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
-  <!--
+<!--
     InstanceBegin template="/Templates/lcm_check_template.dwt" codeOutsideHTMLIsLocked="false"
   -->
-  <head>
-    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
-    <script src="asset/jquery-3.6.0.min.js"></script>
-    <script src="asset/jquery.modal.min.js"></script>
-    <script src="asset/deploy.js"></script>
-    <script>
-      function copyToClipboard(element) {
-        var $temp = $('<input>')
-        $('body').append($temp)
-        $temp.val($(element).text()).select()
-        document.execCommand('copy')
-        $temp.remove()
-      }
-    </script>
-    <link rel="stylesheet" href="asset/jquery.modal.min.css" />
-    <link rel="stylesheet" href="asset/flexboxgrid.min.css" type="text/css" />
-    <link rel="stylesheet" href="asset/fontawesome-pro-5.8.1-web/css/all.css" />
-    <link rel="icon" type="image/png" href="asset/favicon.png" />
-    <style type="text/css">
-      /*-------------
+
+<head>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
+  <script src="asset/jquery-3.6.0.min.js"></script>
+  <script src="asset/jquery.modal.min.js"></script>
+  <script src="asset/deploy.js"></script>
+  <script>
+    function copyToClipboard(element) {
+      var $temp = $('<input>');
+      $('body').append($temp);
+      $temp.val($(element).text()).select();
+      document.execCommand('copy');
+      $temp.remove();
+    }
+  </script>
+  <link rel="stylesheet" href="asset/jquery.modal.min.css" />
+  <link rel="stylesheet" href="asset/flexboxgrid.min.css" type="text/css" />
+  <link rel="stylesheet" href="asset/fontawesome-pro-5.8.1-web/css/all.css" />
+  <link rel="icon" type="image/png" href="asset/favicon.png" />
+  <style type="text/css">
+    /*-------------
   General
 -------------*/
 
-      html {
-        font: normal 16px sans-serif;
-        color: #555;
-        background-color: #f7f7f7;
-      }
-
-      .wrap {
-        max-width: 1280px;
-      }
-
-      .row {
-        text-align: center;
-        margin: 0 auto;
-      }
-
-      .danger {
-        color: #d9534f;
-      }
-
-      p {
-        text-align: center;
-        padding: 0.5em 1em;
-        margin: 0;
-      }
-
-      a {
-        color: inherit;
-        cursor: pointer;
-        opacity: 0.9;
-      }
-
-      a:hover {
-        opacity: 1;
-      }
-
-      a.btn {
-        text-decoration: none;
-        color: #fff;
-        border-radius: 4px;
-        text-transform: uppercase;
-        background-color: #cc584c; /* xcp-ng red */
-        font-weight: 800;
-        text-align: center;
-        padding: 15px 32px;
-        white-space: nowrap;
-      }
-
-      button {
-        opacity: 0.9;
-        text-decoration: none;
-        color: #fff;
-        border-radius: 4px;
-        text-transform: uppercase;
-        background-color: #cc584c; /* xcp-ng red */
-        font-weight: 800;
-        text-align: center;
-        padding: 15px 32px;
-        white-space: nowrap;
-        border: none;
-        cursor: pointer;
-      }
-
-      select {
-        padding: 0 .5em;
-        color: #cc584c;
-        cursor: pointer;
-        position: relative;
-        width: 15em;
-        height: 2em;
-        line-height: 3;
-        background: #fff;
-        overflow: hidden;
-        border-radius: .25em;
-        box-shadow: none;
-      }
-
-      input {
-        padding: 0 .5em;
-        color: #cc584c;
-        position: relative;
-        width: 15em;
-        height: 2em;
-        line-height: 3;
-        border-radius: .25em;
-        box-shadow: none;
-      }
-
-      fieldset {
-        border: none;
-      }
-
-      button:hover {
-        opacity: 1;
-      }
-
-      button:active {
-        background-color: #e09a93;
-        box-shadow: 0 1px #666;
-        transform: translateY(2px);
-      }
-
-      hr {
-        width: 20em;
-        height: 1px;
-        background-color: #263740; /* xcp-ng red */
-        border: 0;
-        margin-top: 3.5em;
-        margin-bottom: 0;
-      }
-
-      h2.title {
-        color: #414a4f;
-        text-transform: capitalize;
-        font: bold 32px 'Open Sans', sans-serif;
-        text-align: center;
-        margin-top: 0.5em;
-        margin-bottom: 1em;
-      }
-
-      h3.subtitle {
-        color: #414a4f;
-        text-transform: capitalize;
-        font: bold 24px 'Open Sans', sans-serif;
-        margin-top: 1em;
-        margin-bottom: 0.2em;
-        text-align: center;
-      }
-
-      h4 {
-        font-size: 1.2em;
-        margin-bottom: 0.4em;
-      }
-
-      /* cyrillic */
-      @font-face {
-        font-family: 'Oswald';
-        font-style: normal;
-        font-weight: 400;
-        src: local('Oswald Regular'), local('Oswald-Regular'),
-          url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752HT8Ghe4.woff2)
-            format('woff2');
-        unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
-      }
-      /* vietnamese */
-      @font-face {
-        font-family: 'Oswald';
-        font-style: normal;
-        font-weight: 400;
-        src: local('Oswald Regular'), local('Oswald-Regular'),
-          url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752Fj8Ghe4.woff2)
-            format('woff2');
-        unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
-      }
-      /* latin-ext */
-      @font-face {
-        font-family: 'Oswald';
-        font-style: normal;
-        font-weight: 400;
-        src: local('Oswald Regular'), local('Oswald-Regular'),
-          url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752Fz8Ghe4.woff2)
-            format('woff2');
-        unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB,
-          U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
-      }
-      /* latin */
-      @font-face {
-        font-family: 'Oswald';
-        font-style: normal;
-        font-weight: 400;
-        src: local('Oswald Regular'), local('Oswald-Regular'),
-          url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752GT8G.woff2)
-            format('woff2');
-        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
-          U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
-          U+2212, U+2215, U+FEFF, U+FFFD;
-      }
-
-      /* Tooltip container */
-      .tooltip {
-        position: relative;
-        display: inline-block;
-      }
-
-      /* Tooltip text */
-      .tooltip .tooltiptext {
-        visibility: hidden;
-        width: 120px;
-        top: 100%;
-        left: 50%;
-        margin-left: -60px; /* Use half of the width (120/2 = 60), to center the tooltip */
-        background-color: #263740;
-        color: #fff;
-        text-align: center;
-        padding: 5px 0;
-        border-radius: 4px;
-
-        /* Position the tooltip text - see examples below! */
-        position: absolute;
-        z-index: 1;
-      }
-
-      /* Show the tooltip text when you mouse over the tooltip container */
-      .tooltip:hover .tooltiptext {
-        visibility: visible;
-      }
-
-      /*----------------------
-  Section
-----------------------*/
-
-      .section {
-        margin-top: 2em;
-      }
-
-      /*----------------------
-  Features Section
-----------------------*/
-
-      p.management {
-        min-height: 7em;
-        padding-left: 2em;
-        padding-right: 2em;
-        line-height: 1.6;
-      }
-
-      p.options {
-        color: #cc584c;
-        padding: 0;
-        margin-top: 0.1em;
-        margin-bottom: 0.1em;
-      }
-
-      p.description {
-        padding-left: 2em;
-        padding-right: 2em;
-        margin-bottom: 1em;
-        line-height: 1.6;
-      }
-
-      .preview {
-        border: 1px solid #a1a1a1;
-        border-radius: 4px;
-        margin-bottom: 10px;
-      }
-
-      /*----------------------
-  Support Section
-----------------------*/
-
-      .support {
-        margin-top: 2em;
-      }
-      .support i {
-        font-size: 4em;
-        color: #cc584c;
-      }
-
-      .support p {
-        font-weight: 600;
-      }
-    </style>
-  </head>
-  <body>
-    <div class="wrap container-fluid">
-      <div>
-        <h2 class="title">Welcome to XCP-ng @PRODUCT_VERSION@</h2>
-        <div class="row">
-          <div class="col-xs">
-            <a href="https://xcp-ng.org/docs/" class="btn"
-              >Documentation</a
-            >
-            <a
-              href="https://xcp-ng.org/blog/"
-              class="btn"
-              style="background-color:#263740"
-              >Latest News</a
-            >
-          </div>
-        </div>
-      </div>
-      <hr />
-      <div class="section">
-        <h3 class="subtitle">Management tools</h3>
-        <p>
-          You have various options to manage your XCP-ng - choose the one that
-          fits best!
-        </p>
-        <div class="row">
-          <div class="col-md">
-            <div class="box">
-              <h4>Xen Orchestra</h4>
-              <a href="#ex1" rel="modal:open"
-                ><img class="preview" src="./asset/xoa.jpg"
-              /></a>
-              <p class="options">
-                <span class="tooltip">
-                  <a
-                    href="https://xen-orchestra.com/#!/xo-features/webinterface?pk_campaign=xcp-ng-html"
-                  >
-                    <i class="fas fa-browser" style="font-size: 1.5em;"></i>
-                    <span class="tooltiptext">Web based</span>
-                  </a>
-                </span>
-                <span class="tooltip">
-                  <a href="https://github.com/vatesfr/xen-orchestra">
-                    <i class="fab fa-github" style="font-size: 1.5em;"></i>
-                    <span class="tooltiptext">Open Source</span>
-                  </a>
-                </span>
-                <span class="tooltip">
-                  <a
-                    href="https://xen-orchestra.com/#!/xo-home?pk_campaign=xcp-ng-html"
-                  >
-                    <i
-                      class="fas fa-user-headset"
-                      style="font-size: 1.5em;"
-                    ></i>
-                    <span class="tooltiptext">Pro Support available</span>
-                  </a>
-                </span>
-              </p>
-              <p class="management">
-                XO comes in a virtual appliance (XOA) covering all the management,
-                backup and cloud features you may need in your infrastructure,
-                directly from your web browser.
-              </p>
-              <p>
-                <a href="#ex1" class="btn" rel="modal:open">Quick deploy</a>
-              </p>
-            </div>
-          </div>
-          <div class="col-md">
-            <div class="box">
-              <h4>xe CLI</h4>
-              <a href="https://xcp-ng.org/docs/cli_reference.html"
-                ><img class="preview" src="./asset/xecli.jpg"
-              /></a>
-              <p class="options">
-                <span class="tooltip">
-                  <i
-                    class="fas fa-browser"
-                    style="font-size: 1.5em; color: #263740;"
-                  ></i>
-                  <span class="tooltiptext">CLI only</span>
-                </span>
-                <span class="tooltip">
-                  <a href="https://github.com/xapi-project/xen-api">
-                    <i class="fab fa-github" style="font-size: 1.5em;"></i>
-                    <span class="tooltiptext">Open Source</span>
-                  </a>
-                </span>
-                <span class="tooltip">
-                  <a href="https://xcp-ng.com?pk_campaign=xe-xcp-ng-html">
-                    <i class="fas fa-user-headset" style="font-size: 1.5em;"></i>
-                    <span class="tooltiptext">Pro Support available</span>
-                  </a>
-                </span>
-              </p>
-              <p class="management">
-                xe CLI is a powerful command line interface available on this host. You can do any XCP-ng operation from there. To learn more about it, please read our documentation.
-              </p>
-              <p>
-                <a
-                  href="https://xcp-ng.org/docs/cli_reference.html"
-                  class="btn"
-                  >CLI documentation</a
-                >
-              </p>
-            </div>
-          </div>
-        </div>
-      </div>
-      <hr />
-      <div class="section">
-        <h3 class="subtitle">Pro Support</h3>
-        <p>
-          XCP-ng is a high performance enterprise level hypervisor, responding
-          to the most demanding company activities from SMBs to Datacenters. We
-          have your back when it comes to pro support. Visit our dedicated
-          website to learn more.
-        </p>
-        <div class="row">
-          <div class="col-xs">
-            <div class="support">
-              <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html"
-                ><i class="fas fa-user-headset"></i
-              ></a>
-              <p class="description">Pro Support 24/7/365</p>
-            </div>
-          </div>
-          <div class="col-xs">
-            <div class="support">
-              <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html"
-                ><i class="fas fa-terminal"></i
-              ></a>
-              <p class="description">SSH remote support</p>
-            </div>
-          </div>
-          <div class="col-xs">
-            <div class="support">
-              <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html"
-                ><i class="fas fa-wrench"></i
-              ></a>
-              <p class="description">Setup assistance</p>
-            </div>
-          </div>
+    html {
+      font: normal 16px sans-serif;
+      color: #555;
+      background-color: #f7f7f7;
+    }
+
+    .wrap {
+      max-width: 1280px;
+    }
+
+    .row {
+      text-align: center;
+      margin: 0 auto;
+    }
+
+    .danger {
+      color: #d9534f;
+    }
+
+    p {
+      text-align: center;
+      padding: 0.5em 1em;
+      margin: 0;
+    }
+
+    a {
+      color: inherit;
+      cursor: pointer;
+      opacity: 0.9;
+    }
+
+    a:hover {
+      opacity: 1;
+    }
+
+    a.btn {
+      text-decoration: none;
+      color: #fff;
+      border-radius: 4px;
+      text-transform: uppercase;
+      /* xcp-ng red */
+      background-color: #cc584c;
+      font-weight: 800;
+      text-align: center;
+      padding: 15px 32px;
+      white-space: nowrap;
+    }
+
+    button {
+      opacity: 0.9;
+      text-decoration: none;
+      color: #fff;
+      border-radius: 4px;
+      text-transform: uppercase;
+      /* xcp-ng red */
+      background-color: #cc584c;
+      font-weight: 800;
+      text-align: center;
+      padding: 15px 32px;
+      white-space: nowrap;
+      border: none;
+      cursor: pointer;
+    }
+
+    select {
+      padding: 0 .5em;
+      color: #cc584c;
+      cursor: pointer;
+      position: relative;
+      width: 15em;
+      height: 2em;
+      line-height: 3;
+      background: #fff;
+      overflow: hidden;
+      border-radius: .25em;
+      box-shadow: none;
+    }
+
+    input {
+      padding: 0 .5em;
+      color: #cc584c;
+      position: relative;
+      width: 15em;
+      height: 2em;
+      line-height: 3;
+      border-radius: .25em;
+      box-shadow: none;
+    }
+
+    fieldset {
+      border: none;
+    }
+
+    button:hover {
+      opacity: 1;
+    }
+
+    button:active {
+      background-color: #e09a93;
+      box-shadow: 0 1px #666;
+      transform: translateY(2px);
+    }
+
+    hr {
+      width: 20em;
+      height: 1px;
+      /* xcp-ng blue */
+      background-color: #263740;
+      border: 0;
+      margin-top: 3.5em;
+      margin-bottom: 0;
+    }
+
+    h2.title {
+      color: #414a4f;
+      text-transform: capitalize;
+      font: bold 32px 'Open Sans', sans-serif;
+      text-align: center;
+      margin-top: 0.5em;
+      margin-bottom: 1em;
+    }
+
+    h3.subtitle {
+      color: #414a4f;
+      text-transform: capitalize;
+      font: bold 24px 'Open Sans', sans-serif;
+      margin-top: 1em;
+      margin-bottom: 0.2em;
+      text-align: center;
+    }
+
+    h4 {
+      font-size: 1.2em;
+      margin-bottom: 0.4em;
+    }
+
+    /* cyrillic */
+    @font-face {
+      font-family: 'Oswald';
+      font-style: normal;
+      font-weight: 400;
+      src: local('Oswald Regular'), local('Oswald-Regular'),
+        url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752HT8Ghe4.woff2) format('woff2');
+      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
+    }
+
+    /* vietnamese */
+    @font-face {
+      font-family: 'Oswald';
+      font-style: normal;
+      font-weight: 400;
+      src: local('Oswald Regular'), local('Oswald-Regular'),
+        url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752Fj8Ghe4.woff2) format('woff2');
+      unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
+    }
+
+    /* latin-ext */
+    @font-face {
+      font-family: 'Oswald';
+      font-style: normal;
+      font-weight: 400;
+      src: local('Oswald Regular'), local('Oswald-Regular'),
+        url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752Fz8Ghe4.woff2) format('woff2');
+      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB,
+        U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
+    }
+
+    /* latin */
+    @font-face {
+      font-family: 'Oswald';
+      font-style: normal;
+      font-weight: 400;
+      src: local('Oswald Regular'), local('Oswald-Regular'),
+        url(https://fonts.gstatic.com/s/oswald/v16/TK3iWkUHHAIjg752GT8G.woff2) format('woff2');
+      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
+        U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
+        U+2212, U+2215, U+FEFF, U+FFFD;
+    }
+
+    /* Tooltip container */
+    .tooltip {
+      position: relative;
+      display: inline-block;
+    }
+
+    /* Tooltip text */
+    .tooltip .tooltiptext {
+      visibility: hidden;
+      width: 120px;
+      top: 100%;
+      left: 50%;
+      /* Use half of the width (120/2 = 60), to center the tooltip */
+      margin-left: -60px;
+      background-color: #263740;
+      color: #fff;
+      text-align: center;
+      padding: 5px 0;
+      border-radius: 4px;
+
+      /* Position the tooltip text - see examples below! */
+      position: absolute;
+      z-index: 1;
+    }
+
+    /* Show the tooltip text when you mouse over the tooltip container */
+    .tooltip:hover .tooltiptext {
+      visibility: visible;
+    }
+
+    /*----------------------
+      Section
+    ----------------------*/
+
+    .section {
+      margin-top: 2em;
+    }
+
+    /*----------------------
+      Features Section
+    ----------------------*/
+
+    p.management {
+      min-height: 7em;
+      padding-left: 2em;
+      padding-right: 2em;
+      line-height: 1.6;
+    }
+
+    p.options {
+      color: #cc584c;
+      padding: 0;
+      margin-top: 0.1em;
+      margin-bottom: 0.1em;
+    }
+
+    p.description {
+      padding-left: 2em;
+      padding-right: 2em;
+      margin-bottom: 1em;
+      line-height: 1.6;
+    }
+
+    .preview {
+      border: 1px solid #a1a1a1;
+      border-radius: 4px;
+      margin-bottom: 10px;
+    }
+
+    /*----------------------
+      Support Section
+    ----------------------*/
+
+    .support {
+      margin-top: 2em;
+    }
+
+    .support i {
+      font-size: 4em;
+      color: #cc584c;
+    }
+
+    .support p {
+      font-weight: 600;
+    }
+  </style>
+</head>
+
+<body>
+  <div class="wrap container-fluid">
+    <div>
+      <h2 class="title">Welcome to XCP-ng @PRODUCT_VERSION@</h2>
+      <div class="row">
+        <div class="col-xs">
+          <a href="https://xcp-ng.org/docs/" class="btn">Documentation</a>
+          <a href="https://xcp-ng.org/blog/" class="btn" style="background-color:#263740">Latest News</a>
         </div>
-        <p>
-          <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html" class="btn"
-            >Go Pro</a
-          >
-        </p>
       </div>
-      <hr />
-      <div class="section">
-        <h3 class="subtitle">Join our community</h3>
-        <p class="description">
-          Thousands of people are using XCP-ng, hundreds are contributing on our
-          community forum. Become a part of our community!
-        </p>
-        <p>
-          <a href="https://xcp-ng.org/forum" class="btn">Community forum</a>
-        </p>
-      </div>
-      <!-- Modalcontent -->
-      <div id="ex1" class="modal">
-        <h3 class="subtitle">Xen Orchestra quick deploy</h3>
-        <p style="font-size: small;">This will download and deploy a new virtual machine on your host, called "XOA" (Xen Orchestra virtual Appliance).</p>
-        <form id="connect" onsubmit="event.preventDefault(); connect()">
-          <fieldset>
-            <p>
-              <label>
-                Host username<br />
-                <input type="text" disabled value="root" />
-              </label>
-            </p>
-            <p>
-              <label>
-                Host password<br />
-                <input type="password" id="pwd" />
-              </label>
-            </p>
-            <p>
-              <em
-                ><i class="fas fa-info-circle"></i> This host's root
-                credentials</em
-              >
-            </p>
-            <p><button class="btn" type="submit">Connect</button></p>
-          </fieldset>
-        </form>
-        <form
-          id="config"
-          onsubmit="event.preventDefault(); submitConfig()"
-          style="display: none"
-        >
-          <fieldset>
-            <p>
-              <label>
-                Select a storage<br />
-                <select id="srs"></select>
-              </label>
-            </p>
-            <p>
-              <label>
-                Select a network<br />
-                <select id="networks"></select>
-              </label>
-            </p>
-            <p id="ip-error" style="display: none">
-              <em class="danger"
-                ><i class="fas fa-exclamation-triangle"></i>
-                <span
-                  >You entered the same IP address as your host. Please choose a
-                  different one for your XOA:</span
-                ></em
-              >
-            </p>
-            <p>
-              <label>
-                XOA VM IP address<br />
-                <input type="text" id="ip" />
-              </label>
-            </p>
-            <p>
-              <label>
-                Netmask<br />
-                <input type="text" placeholder="255.255.255.0" id="netmask" />
-              </label>
-            </p>
-            <p>
-              <label>
-                Gateway<br />
-                <input type="text" id="gateway" />
-              </label>
-            </p>
-            <p>
-              <label>
-                DNS<br />
-                <input type="text" placeholder="8.8.8.8" id="dns" />
-              </label>
-            </p>
-            <p>
-              <em
-                ><i class="fas fa-info-circle"></i> Leave everything empty to
-                use DHCP. Provide all the information otherwise.</em
-              >
-            </p>
-            <p><button class="btn" type="submit">Next</button></p>
-          </fieldset>
-        </form>
-        <form
-          id="accounts"
-          onsubmit="event.preventDefault(); deploy()"
-          style="display: none"
-        >
-          <fieldset>
-            <h4>Create an Admin account on your XOA</h4>
-            <p>
-              <label>
-                Username<br />
-                <input
-                  type="text"
-                  placeholder="admin@admin.net"
-                  id="adminEmail"
-                /> </label
-              ><br />
-              <label>
-                Password<br />
-                <input type="password" placeholder="admin" id="adminPwd" />
-              </label>
+    </div>
+    <hr />
+    <div class="section">
+      <h3 class="subtitle">Management tools</h3>
+      <p>
+        You have various options to manage your XCP-ng - choose the one that
+        fits best!
+      </p>
+      <div class="row">
+        <div class="col-md">
+          <div class="box">
+            <h4>Xen Orchestra</h4>
+            <a href="#ex1" rel="modal:open"><img class="preview" src="./asset/xoa.jpg" /></a>
+            <p class="options">
+              <span class="tooltip">
+                <a href="https://xen-orchestra.com/#!/xo-features/webinterface?pk_campaign=xcp-ng-html">
+                  <i class="fas fa-browser" style="font-size: 1.5em;"></i>
+                  <span class="tooltiptext">Web based</span>
+                </a>
+              </span>
+              <span class="tooltip">
+                <a href="https://github.com/vatesfr/xen-orchestra">
+                  <i class="fab fa-github" style="font-size: 1.5em;"></i>
+                  <span class="tooltiptext">Open Source</span>
+                </a>
+              </span>
+              <span class="tooltip">
+                <a href="https://xen-orchestra.com/#!/xo-home?pk_campaign=xcp-ng-html">
+                  <i class="fas fa-user-headset" style="font-size: 1.5em;"></i>
+                  <span class="tooltiptext">Pro Support available</span>
+                </a>
+              </span>
             </p>
-            <h4>Register your XOA</h4>
-            <p>
-              <a href="https://xen-orchestra.com/#!/signup" target="_blank"
-                >Create an account</a
-              >
+            <p class="management">
+              XO comes in a virtual appliance (XOA) covering all the management,
+              backup and cloud features you may need in your infrastructure,
+              directly from your web browser.
             </p>
             <p>
-              <label>
-                xen-orchestra.com username<br />
-                <input type="text" id="updaterEmail" /> </label
-              ><br />
-              <label>
-                xen-orchestra.com password<br />
-                <input type="password" id="updaterPwd" />
-              </label>
+              <a href="#ex1" class="btn" rel="modal:open">Quick deploy</a>
             </p>
-            <h4>Set the XOA machine password</h4>
-            <p>
-              <label>
-                Login<br />
-                <input type="text" disabled value="xoa" /> </label
-              ><br />
-              <label>
-                Password<br />
-                <input type="password" placeholder="Account disabled if empty" id="xoaPwd" />
-              </label>
+          </div>
+        </div>
+        <div class="col-md">
+          <div class="box">
+            <h4>xe CLI</h4>
+            <a href="https://xcp-ng.org/docs/cli_reference.html"><img class="preview" src="./asset/xecli.jpg" /></a>
+            <p class="options">
+              <span class="tooltip">
+                <i class="fas fa-browser" style="font-size: 1.5em; color: #263740;"></i>
+                <span class="tooltiptext">CLI only</span>
+              </span>
+              <span class="tooltip">
+                <a href="https://github.com/xapi-project/xen-api">
+                  <i class="fab fa-github" style="font-size: 1.5em;"></i>
+                  <span class="tooltiptext">Open Source</span>
+                </a>
+              </span>
+              <span class="tooltip">
+                <a href="https://xcp-ng.com?pk_campaign=xe-xcp-ng-html">
+                  <i class="fas fa-user-headset" style="font-size: 1.5em;"></i>
+                  <span class="tooltiptext">Pro Support available</span>
+                </a>
+              </span>
             </p>
-            <p>
-              <em><i class="fas fa-info-circle"></i> You can do this later</em>
+            <p class="management">
+              xe CLI is a powerful command line interface available on this host. You can do any XCP-ng operation from
+              there. To learn more about it, please read our documentation.
             </p>
             <p>
-              <button class="btn" type="submit">
-                <i class="fas fa-spinner fa-pulse" style="display: none;"></i>
-                <span id="deploy">Deploy</span>
-              </button>
+              <a href="https://xcp-ng.org/docs/cli_reference.html" class="btn">CLI documentation</a>
             </p>
-          </fieldset>
-        </form>
-        <br />
-        <a href="#" rel="modal:close">Close</a>
+          </div>
+        </div>
       </div>
     </div>
-  </body>
-</html>
+    <hr />
+    <div class="section">
+      <h3 class="subtitle">Pro Support</h3>
+      <p>
+        XCP-ng is a high performance enterprise level hypervisor, responding
+        to the most demanding company activities from SMBs to Datacenters. We
+        have your back when it comes to pro support. Visit our dedicated
+        website to learn more.
+      </p>
+      <div class="row">
+        <div class="col-xs">
+          <div class="support">
+            <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html"><i class="fas fa-user-headset"></i></a>
+            <p class="description">Pro Support 24/7/365</p>
+          </div>
+        </div>
+        <div class="col-xs">
+          <div class="support">
+            <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html"><i class="fas fa-terminal"></i></a>
+            <p class="description">SSH remote support</p>
+          </div>
+        </div>
+        <div class="col-xs">
+          <div class="support">
+            <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html"><i class="fas fa-wrench"></i></a>
+            <p class="description">Setup assistance</p>
+          </div>
+        </div>
+      </div>
+      <p>
+        <a href="https://xcp-ng.com?pk_campaign=xcp-ng-html" class="btn">Go Pro</a>
+      </p>
+    </div>
+    <hr />
+    <div class="section">
+      <h3 class="subtitle">Join our community</h3>
+      <p class="description">
+        Thousands of people are using XCP-ng, hundreds are contributing on our
+        community forum. Become a part of our community!
+      </p>
+      <p>
+        <a href="https://xcp-ng.org/forum" class="btn">Community forum</a>
+      </p>
+    </div>
+    <!-- Modalcontent -->
+    <div id="ex1" class="modal">
+      <h3 class="subtitle">Xen Orchestra quick deploy</h3>
+      <p style="font-size: small;">This will download and deploy a new virtual machine on your host, called "XOA" (Xen
+        Orchestra virtual Appliance).</p>
+      <form id="connect" onsubmit="event.preventDefault(); connect()">
+        <fieldset>
+          <p>
+            <label>
+              Host username<br />
+              <input type="text" disabled value="root" />
+            </label>
+          </p>
+          <p>
+            <label>
+              Host password<br />
+              <input type="password" id="pwd" />
+            </label>
+          </p>
+          <p>
+            <em><i class="fas fa-info-circle"></i> This host's root
+              credentials</em>
+          </p>
+          <p><button class="btn" type="submit">Connect</button></p>
+        </fieldset>
+      </form>
+      <form id="config" onsubmit="event.preventDefault(); submitConfig()" style="display: none">
+        <fieldset>
+          <p>
+            <label>
+              Select a storage<br />
+              <select id="srs"></select>
+            </label>
+          </p>
+          <p>
+            <label>
+              Select a network<br />
+              <select id="networks"></select>
+            </label>
+          </p>
+          <p id="ip-error" style="display: none">
+            <em class="danger"><i class="fas fa-exclamation-triangle"></i>
+              <span>You entered the same IP address as your host. Please choose a
+                different one for your XOA:</span></em>
+          </p>
+          <p>
+            <label>
+              XOA VM IP address<br />
+              <input type="text" id="ip" />
+            </label>
+          </p>
+          <p>
+            <label>
+              Netmask<br />
+              <input type="text" placeholder="255.255.255.0" id="netmask" />
+            </label>
+          </p>
+          <p>
+            <label>
+              Gateway<br />
+              <input type="text" id="gateway" />
+            </label>
+          </p>
+          <p>
+            <label>
+              DNS<br />
+              <input type="text" placeholder="8.8.8.8" id="dns" />
+            </label>
+          </p>
+          <p>
+            <em><i class="fas fa-info-circle"></i> Leave everything empty to
+              use DHCP. Provide all the information otherwise.</em>
+          </p>
+          <p><button class="btn" type="submit">Next</button></p>
+        </fieldset>
+      </form>
+      <form id="accounts" onsubmit="event.preventDefault(); deploy()" style="display: none">
+        <fieldset>
+          <h4>Create an Admin account on your XOA</h4>
+          <p>
+            <label>
+              Username<br />
+              <input type="text" placeholder="admin@admin.net" id="adminEmail" /> </label><br />
+            <label>
+              Password<br />
+              <input type="password" placeholder="admin" id="adminPwd" />
+            </label>
+          </p>
+          <h4>Register your XOA</h4>
+          <p>
+            <a href="https://xen-orchestra.com/#!/signup" target="_blank">Create an account</a>
+          </p>
+          <p>
+            <label>
+              xen-orchestra.com username<br />
+              <input type="text" id="updaterEmail" /> </label><br />
+            <label>
+              xen-orchestra.com password<br />
+              <input type="password" id="updaterPwd" />
+            </label>
+          </p>
+          <h4>Set the XOA machine password</h4>
+          <p>
+            <label>
+              Login<br />
+              <input type="text" disabled value="xoa" /> </label><br />
+            <label>
+              Password<br />
+              <input type="password" placeholder="Account disabled if empty" id="xoaPwd" />
+            </label>
+          </p>
+          <p>
+            <em><i class="fas fa-info-circle"></i> You can do this later</em>
+          </p>
+          <p>
+            <button class="btn" type="submit">
+              <i class="fas fa-spinner fa-pulse" style="display: none;"></i>
+              <span id="deploy">Deploy</span>
+            </button>
+          </p>
+        </fieldset>
+      </form>
+      <br />
+      <a href="#" rel="modal:close">Close</a>
+    </div>
+  </div>
+</body>
+
+</html>
\ No newline at end of file
diff --git a/src/xenserver/opt/xensource/www/asset/deploy.js b/src/xenserver/opt/xensource/www/asset/deploy.js
index 081fd88..b31bc34 100644
--- a/src/xenserver/opt/xensource/www/asset/deploy.js
+++ b/src/xenserver/opt/xensource/www/asset/deploy.js
@@ -1,323 +1,249 @@
 let call,
   vmRef,
   vmIp,
-  host = window.location.host
+  host = window.location.host;
 
 function _handleUserError(error) {
-  alert(
-    typeof error === 'object' && !(error instanceof Error)
-      ? JSON.stringify(error, null, 2)
-      : (error && error.message) || error
-  )
+  alert(typeof error === "object" && !(error instanceof Error) ? JSON.stringify(error, null, 2) : (error && error.message) || error);
 }
 
 function setStep(previousStep, nextStep) {
-  $(`#${previousStep}`).css({ display: 'none' })
-  $(`#${nextStep}`).css({ display: 'block' })
+  $(`#${previousStep}`).css({ display: "none" });
+  $(`#${nextStep}`).css({ display: "block" });
 }
 
 function _jsonRpcCall(url, method, params) {
-  console.log(`-> ${method}(${JSON.stringify(params)})`)
+  console.log(`-> ${method}(${JSON.stringify(params)})`);
   return window
     .fetch(url, {
       body: JSON.stringify({
         id: 0,
-        jsonrpc: '2.0',
+        jsonrpc: "2.0",
         method,
-        params
+        params,
       }),
-      method: 'POST',
+      method: "POST",
       headers: new Headers({
-        Accept: 'application/json',
-        'Content-Type': 'application/json'
-      })
+        Accept: "application/json",
+        "Content-Type": "application/json",
+      }),
     })
-    .then(res => {
+    .then((res) => {
       if (!res.ok) {
-        throw res.status
+        throw res.status;
       }
-      return res.json().then(json => {
+      return res.json().then((json) => {
         if (json.result !== undefined) {
-          console.log(`<- ${JSON.stringify(json.result)}`)
-          return json.result
+          console.log(`<- ${JSON.stringify(json.result)}`);
+          return json.result;
         }
-        console.error(`<x ${JSON.stringify(json.error)}`)
-        throw json.error
-      })
-    })
+        console.error(`<x ${JSON.stringify(json.error)}`);
+        throw json.error;
+      });
+    });
 }
 function _call(method, params) {
-  return _jsonRpcCall(`//${host}/jsonrpc`, method, params).catch(error => {
-    if (error && error.message === 'HOST_IS_SLAVE') {
-      console.log('Host is slave, changing host to master', error.data[0])
-      host = error.data[0]
-      return _call(method, params)
+  return _jsonRpcCall(`//${host}/jsonrpc`, method, params).catch((error) => {
+    if (error && error.message === "HOST_IS_SLAVE") {
+      console.log("Host is slave, changing host to master", error.data[0]);
+      host = error.data[0];
+      return _call(method, params);
     }
-    throw error
-  })
+    throw error;
+  });
 }
 
 function connect() {
-  $('#connect fieldset').attr('disabled', true)
-  _call('session.login_with_password', [
-    'root',
-    $('#pwd').val(),
-    '2.3',
-    'XOA deploy'
-  ])
-    .then(sessionRef => {
-      call = (method, ...params) => _call(method, [sessionRef].concat(params))
+  $("#connect fieldset").attr("disabled", true);
+  _call("session.login_with_password", ["root", $("#pwd").val(), "2.3", "XOA deploy"])
+    .then((sessionRef) => {
+      call = (method, ...params) => _call(method, [sessionRef].concat(params));
     })
-    .then(() =>
-      Promise.all([
-        call('SR.get_all_records'),
-        call('pool.get_all_records'),
-        call('network.get_all_records'),
-        call('PIF.get_all_records')
-      ])
-    )
+    .then(() => Promise.all([call("SR.get_all_records"), call("pool.get_all_records"), call("network.get_all_records"), call("PIF.get_all_records")]))
     .then(([srs, pools, networks, pifs]) => {
-      setStep('connect', 'config')
-      const selectSr = $('#srs')
-      let sr
-      Object.keys(srs).forEach(srRef => {
-        sr = srs[srRef]
-        if (sr.content_type !== 'iso' && sr.physical_size > 0) {
+      setStep("connect", "config");
+      const selectSr = $("#srs");
+      let sr;
+      Object.keys(srs).forEach((srRef) => {
+        sr = srs[srRef];
+        if (sr.content_type !== "iso" && sr.physical_size > 0) {
           selectSr.append(
-            $('<option/>')
+            $("<option/>")
               .val(srRef)
-              .text(
-                `${sr.name_label} - ${Math.round(
-                  (sr.physical_size - sr.physical_utilisation) /
-                    Math.pow(1024, 3)
-                )} GiB left`
-              )
-          )
+              .text(`${sr.name_label} - ${Math.round((sr.physical_size - sr.physical_utilisation) / Math.pow(1024, 3))} GiB left`)
+          );
         }
-      })
-      const { default_SR } = pools[Object.keys(pools)[0]]
+      });
+      const { default_SR } = pools[Object.keys(pools)[0]];
       if (default_SR !== undefined) {
-        selectSr.val(default_SR)
+        selectSr.val(default_SR);
       }
-      const selectNetwork = $('#networks')
-      let network
-      Object.keys(networks).forEach(networkRef => {
-        network = networks[networkRef]
-        selectNetwork.append(
-          $('<option/>')
-            .val(networkRef)
-            .data('mtu', network.MTU)
-            .text(network.name_label)
-        )
-      })
-      const managementPif = Object.values(pifs).find(pif => pif.management)
+      const selectNetwork = $("#networks");
+      let network;
+      Object.keys(networks).forEach((networkRef) => {
+        network = networks[networkRef];
+        selectNetwork.append($("<option/>").val(networkRef).data("mtu", network.MTU).text(network.name_label));
+      });
+      const managementPif = Object.values(pifs).find((pif) => pif.management);
       if (managementPif && managementPif.network !== undefined) {
-        selectNetwork.val(managementPif.network)
+        selectNetwork.val(managementPif.network);
       }
     })
-    .catch(err => {
-      $('#connect fieldset').attr('disabled', false)
-      this._handleUserError(err)
-    })
+    .catch((err) => {
+      $("#connect fieldset").attr("disabled", false);
+      this._handleUserError(err);
+    });
 }
 
 function submitConfig() {
-  const ipError = $('#ip-error')
-  ipError.hide()
-  const ip = $('#ip').val()
+  const ipError = $("#ip-error");
+  ipError.hide();
+  const ip = $("#ip").val();
   if (ip === window.location.hostname) {
-    ipError.show()
-    return
+    ipError.show();
+    return;
   }
-  setStep('config', 'accounts')
+  setStep("config", "accounts");
 }
 
 function deploy() {
-  const status = text => $('#deploy').text(text)
-  $('i.fa-spinner.fa-pulse').css({ display: 'inherit' })
-  const srRef = $('#srs').val()
-  status('Deploying XOA…')
-  $('#accounts fieldset').attr('disabled', true)
-  let registrationToken
-  const updaterEmail = $('#updaterEmail').val()
-  const updaterPwd = $('#updaterPwd').val()
+  const status = (text) => $("#deploy").text(text);
+  $("i.fa-spinner.fa-pulse").css({ display: "inherit" });
+  const srRef = $("#srs").val();
+  status("Deploying XOA…");
+  $("#accounts fieldset").attr("disabled", true);
+  let registrationToken;
+  const updaterEmail = $("#updaterEmail").val();
+  const updaterPwd = $("#updaterPwd").val();
   Promise.resolve()
     .then(() => {
       if (updaterEmail && updaterPwd) {
-        return _jsonRpcCall('https://xen-orchestra.com/api', 'registerXoa', {
+        return _jsonRpcCall("https://xen-orchestra.com/api", "registerXoa", {
           email: updaterEmail,
-          password: updaterPwd
-        }).then(_registrationToken => {
-          registrationToken = _registrationToken
-        })
+          password: updaterPwd,
+        }).then((_registrationToken) => {
+          registrationToken = _registrationToken;
+        });
       }
     })
     .then(() =>
       call(
-        'VM.import',
-        'http://xoa.io:8888/',
+        "VM.import",
+        "http://xoa.io:8888/",
         srRef,
         false, // full_restore
         false // force
       )
     )
     .then(([_vmRef]) => {
-      vmRef = _vmRef
-      status('Configuring XOA…')
-      const promises = []
-      const ip = $('#ip').val()
+      vmRef = _vmRef;
+      status("Configuring XOA…");
+      const promises = [];
+      const ip = $("#ip").val();
       if (ip) {
         promises.push(
-          call('VM.add_to_xenstore_data', vmRef, 'vm-data/ip', ip),
-          call(
-            'VM.add_to_xenstore_data',
-            vmRef,
-            'vm-data/netmask',
-            $('#netmask').val() || '255.255.255.0'
-          ),
-          call(
-            'VM.add_to_xenstore_data',
-            vmRef,
-            'vm-data/gateway',
-            $('#gateway').val() || ''
-          ),
-          call(
-            'VM.add_to_xenstore_data',
-            vmRef,
-            'vm-data/dns',
-            $('#dns').val() || '8.8.8.8'
-          )
-        )
+          call("VM.add_to_xenstore_data", vmRef, "vm-data/ip", ip),
+          call("VM.add_to_xenstore_data", vmRef, "vm-data/netmask", $("#netmask").val() || "255.255.255.0"),
+          call("VM.add_to_xenstore_data", vmRef, "vm-data/gateway", $("#gateway").val() || ""),
+          call("VM.add_to_xenstore_data", vmRef, "vm-data/dns", $("#dns").val() || "8.8.8.8")
+        );
       }
-      const email = $('#adminEmail').val()
-      const password = $('#adminPwd').val()
+      const email = $("#adminEmail").val();
+      const password = $("#adminPwd").val();
       if (email && password) {
-        promises.push(
-          call(
-            'VM.add_to_xenstore_data',
-            vmRef,
-            'vm-data/admin-account',
-            JSON.stringify({ email, password })
-          )
-        )
+        promises.push(call("VM.add_to_xenstore_data", vmRef, "vm-data/admin-account", JSON.stringify({ email, password })));
       }
       if (registrationToken) {
-        promises.push(
-          call(
-            'VM.add_to_xenstore_data',
-            vmRef,
-            'vm-data/xoa-updater-credentials',
-            JSON.stringify({ email: updaterEmail, registrationToken })
-          )
-        )
+        promises.push(call("VM.add_to_xenstore_data", vmRef, "vm-data/xoa-updater-credentials", JSON.stringify({ email: updaterEmail, registrationToken })));
       }
-      const xoaPwd = $('#xoaPwd').val()
+      const xoaPwd = $("#xoaPwd").val();
       if (xoaPwd) {
-        promises.push(
-          call(
-            'VM.add_to_xenstore_data',
-            vmRef,
-            'vm-data/system-account-xoa-password',
-            xoaPwd
-          )
-        )
+        promises.push(call("VM.add_to_xenstore_data", vmRef, "vm-data/system-account-xoa-password", xoaPwd));
       }
       promises.push(
         call(
-          'VM.add_to_xenstore_data',
+          "VM.add_to_xenstore_data",
           vmRef,
-          'vm-data/xen-servers',
-          JSON.stringify([{
-            allowUnauthorized: true,
-            host,
-            password: $('#pwd').val(),
-            username: 'root'
-          }])
+          "vm-data/xen-servers",
+          JSON.stringify([
+            {
+              allowUnauthorized: true,
+              host,
+              password: $("#pwd").val(),
+              username: "root",
+            },
+          ])
         )
-      )
+      );
 
-      const network = $('#networks').val()
-      const MTU = $('#networks')
-        .find(':selected')
-        .data('mtu')
+      const network = $("#networks").val();
+      const MTU = $("#networks").find(":selected").data("mtu");
       promises.push(
-        call('VM.get_VIFs', vmRef)
-          .then(([vifRef]) => call('VIF.destroy', vifRef))
-          .then(() => call('VM.get_allowed_VIF_devices', vmRef))
-          .then(devices =>
-            call('VIF.create', {
+        call("VM.get_VIFs", vmRef)
+          .then(([vifRef]) => call("VIF.destroy", vifRef))
+          .then(() => call("VM.get_allowed_VIF_devices", vmRef))
+          .then((devices) =>
+            call("VIF.create", {
               device: devices[0],
-              MAC: '',
+              MAC: "",
               MTU,
               network,
               other_config: {},
               qos_algorithm_params: {},
-              qos_algorithm_type: '',
-              VM: vmRef
+              qos_algorithm_type: "",
+              VM: vmRef,
             })
           )
-      )
+      );
 
-      return Promise.all(promises)
+      return Promise.all(promises);
     })
     .then(() => {
-      status('Starting XOA…')
+      status("Starting XOA…");
       return call(
-        'VM.start',
+        "VM.start",
         vmRef,
         false, // start_paused
         false // force
-      )
+      );
     })
-    .then(() => call('VM.get_guest_metrics', vmRef))
-    .then(metricsRef => {
-      status('Almost there…')
-      let attempts = 120
+    .then(() => call("VM.get_guest_metrics", vmRef))
+    .then((metricsRef) => {
+      status("Almost there…");
+      let attempts = 120;
       const waitForIp = () => {
-        return call('VM_guest_metrics.get_networks', metricsRef).then(
-          networks => {
-            if (networks && networks['0/ip'] !== undefined) {
-              return networks['0/ip']
-            }
-            if (attempts-- === 0) {
-              throw 'XOA not responding'
-            }
-            return new Promise((resolve, reject) =>
-              setTimeout(() => waitForIp().then(resolve, reject), 1e3)
-            )
+        return call("VM_guest_metrics.get_networks", metricsRef).then((networks) => {
+          if (networks && networks["0/ip"] !== undefined) {
+            return networks["0/ip"];
           }
-        )
-      }
-      return waitForIp()
+          if (attempts-- === 0) {
+            throw "XOA not responding";
+          }
+          return new Promise((resolve, reject) => setTimeout(() => waitForIp().then(resolve, reject), 1e3));
+        });
+      };
+      return waitForIp();
     })
-    .then(ip => {
-      vmIp = ip
+    .then((ip) => {
+      vmIp = ip;
       return Promise.all(
-        [
-          'admin-account',
-          'dns',
-          'gateway',
-          'ip',
-          'netmask',
-          'xen-servers',
-          'xoa-updater-credentials'
-        ].map(key =>
-          call('VM.remove_from_xenstore_data', vmRef, `vm-data/${key}`).catch(error => {
-            console.warn('VM.remove_from_xenstore_data', key, error)
+        ["admin-account", "dns", "gateway", "ip", "netmask", "xen-servers", "xoa-updater-credentials"].map((key) =>
+          call("VM.remove_from_xenstore_data", vmRef, `vm-data/${key}`).catch((error) => {
+            console.warn("VM.remove_from_xenstore_data", key, error);
           })
         )
-      )
+      );
     })
     .then(() => {
-      status('XOA is ready! Redirecting…')
+      status("XOA is ready! Redirecting…");
       setTimeout(() => {
-        window.location = `http://${$('#ip').val() || vmIp}`
-      }, 3e3)
-    })
-    .catch(err => {
-      $('#accounts fieldset').attr('disabled', false)
-      $('i.fa-spinner.fa-pulse').css({ display: 'none' })
-      status('Deploy')
-      this._handleUserError(err)
+        window.location = `http://${$("#ip").val() || vmIp}`;
+      }, 3e3);
     })
+    .catch((err) => {
+      $("#accounts fieldset").attr("disabled", false);
+      $("i.fa-spinner.fa-pulse").css({ display: "none" });
+      status("Deploy");
+      this._handleUserError(err);
+    });
 }
-- 
2.30.2

